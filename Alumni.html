<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>SJRU Stats</title>
    <link href="https://fonts.googleapis.com/css2?family=Lexend&display=swap" rel="stylesheet">
    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: #ffd700;
        color: black;
        font-family: 'Lexend', sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #container {
        text-align: center;
        animation: fade 2s infinite alternate;
        font-size: 2em;
        line-height: 1.4em;
      }

      @keyframes fade {
        from { opacity: 0.5; }
        to { opacity: 1; }
      }
    </style>
  </head>
  <body>
    <div id="container">
      <div id="alumniCount">Loading alumni...</div>
      <div>registered from</div>
      <div id="cityCount">Loading cities...</div>
    </div>

    <script>
      async function updateStats() {
        try {
          const res = await fetch("https://opensheet.elk.sh/15e0MiBms-ikomy-4LriNVeLHA1X2yg6t8XNHUFpGHMQ/Sheet1");
          const data = await res.json();

          const alumniCount = data.length;
          const cities = new Set(data.map(row => row.City?.trim()).filter(Boolean));

          document.getElementById("alumniCount").innerText = alumniCount + " Alumni";
          document.getElementById("cityCount").innerText = cities.size + " cities";
        } catch (e) {
          document.getElementById("container").innerText = "Failed to load stats";
          console.error(e);
        }
      }

      updateStats();
      setInterval(updateStats, 3000);
    </script>
  </body>
</html>
